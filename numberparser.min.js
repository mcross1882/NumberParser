(function(){var d=function(a){a=a||{};var b=a.separator?a.separator:",";a=a.decimalPoint?a.decimalPoint:".";var c=b+a;this.INTEGER_REGEX=/%([-+])?([0-9])?(\d+)?([s])?d/;this.FLOAT_REGEX=new RegExp("%([0-9]+)?["+a+"]?([0-9]+)?([s])?f");this.FORMAT_REGEX=/%.*?([s])?([df])/;this.HAS_THOUSAND_REGEX=new RegExp("(\\d\\d\\d\\d)["+c+"]");this.THOUSAND_SPLIT_REGEX=new RegExp("([^"+c+"])(\\d\\d\\d)(["+c+"])");this.DEFAULT_DIGIT="0";this.DEFAULT_WIDTH=null;this.DEFAULT_PRECISION=12;this.DEFAULT_SCALE=2;this.separator=
b;this.decimalPoint=a};d.prototype.parseValue=function(a,b){if(isNaN(a))throw Error("Cannot parse value. Value must be a number");var c=this.extractFormatParts(b),d=a;switch(c.formatType){case "d":d=this.formatInteger(a,b);break;case "f":d=this.formatFloat(a,b);break;default:throw Error('Unknown format type "'+c.formatType+'" was given');}c.usingSeparator&&(d=this.addSeparators(d));return d};d.prototype.extractFormatParts=function(a){var b=a.match(this.FORMAT_REGEX);if(!b||3>b.length||!b[2])throw Error("Could not parse "+
a);return{usingSeparator:"s"==b[1],formatType:b[2]}};d.prototype.formatInteger=function(a,b){var c=this.extractIntegerFormat(b);a=c&&c.padLeft?this.addLeftPadding(a,c.digit,c.width):this.addRightPadding(a,c.digit,c.width);return b.replace(this.INTEGER_REGEX,a)};d.prototype.extractIntegerFormat=function(a){a=a.match(this.INTEGER_REGEX);return!a||4>a.length?null:{padLeft:"-"==a[1],digit:a[2]?a[2]:this.DEFAULT_DIGIT,width:a[3]?a[3]:this.DEFAULT_WIDTH}};d.prototype.addLeftPadding=function(a,b,c){if(!c||
0>c)return a;for(var d="",e=0;e++<c;)d+=b;return(d+a).slice(-c)};d.prototype.addRightPadding=function(a,b,c){if(!c||0>c)return a;a=a.toString();for(var d=a.length;d++<c;)a+=b;return a};d.prototype.formatFloat=function(a,b){if(!this.isValidFloatFormat(b))throw Error("Invalid float format given. Too many decimal points in format");var c=this.extractFloatFormat(b);if(!c)return a;var d=parseFloat(a).toPrecision(c.precision),c=parseFloat(d).toFixed(c.scale);return b.replace(this.FLOAT_REGEX,c).replace(/[,.]/g,
this.decimalPoint)};d.prototype.isValidFloatFormat=function(a){return 2>=a.split(this.decimalPoint).length};d.prototype.extractFloatFormat=function(a){a=a.match(this.FLOAT_REGEX);return!a||3>a.length?null:{precision:a[1]?a[1]:this.DEFAULT_PRECISION,scale:a[2]?a[2]:this.DEFAULT_SCALE}};d.prototype.addSeparators=function(a){if(!a)return a;a=a.toString().split(this.decimalPoint);var b=this.injectSeparators(a[0],this.separator,this.decimalPoint);2==a.length&&(b+=this.decimalPoint+a[1]);return b};d.prototype.injectSeparators=
function(a,b,c){if(4>a.length)return a;for(a=a.replace(/(\d\d\d)$/g,b+"$1");this.HAS_THOUSAND_REGEX.test(a);)a=a.replace(this.THOUSAND_SPLIT_REGEX,"$1"+b+"$2$3");return a};"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=d);"undefined"==typeof module&&"undefined"!=typeof window&&(window.NumberParser=d)})();
